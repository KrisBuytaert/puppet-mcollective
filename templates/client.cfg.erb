topicprefix = /topic/
<%# strip mcollective direcotry suffix -%>
libdir = <%= scope.lookupvar("::mcollective::plugins::p_base").sub(/\/mcollective$/,"") %>
logfile = /dev/null
loglevel = info

# Plugins 
<% unless scope.lookupvar("mcollective::psk").empty? -%>
securityprovider = psk
plugin.psk = <%= scope.lookupvar("mcollective::psk") %>

<% end -%>
<% unless scope.lookupvar("mcollective::stomp_host").empty? -%>
connector = stomp
plugin.stomp.host = <%= scope.lookupvar("mcollective::stomp_host") %>
plugin.stomp.port = <%= scope.lookupvar("mcollective::stomp_port") %>
plugin.stomp.user = <%= scope.lookupvar("mcollective::stomp_user") %>
plugin.stomp.password = <%= scope.lookupvar("mcollective::stomp_password") %>
<% end -%>

# Facts
<% if scope.lookupvar("mcollective::factsource") != 'yaml' -%>
factsource = <%= scope.lookupvar("mcollective::factsource") -%>
<% else -%>
factsource = yaml
plugin.yaml = /etc/mcollective/facts.yaml
<% end -%>

# Collectives
#
<% ! if has_variable?("mcollective::collectives") -%>
collectives = <%= scope.lookupvar("mcollective::collectives") %>
<% end -%>
<% ! if has_variable?("mcollective::main_collective") -%>
main_collective = <%= scope.lookupvar("mcollective::main_collective") %>
<% end -%>

